<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Chat</title>
</head>
<body>
<h1>Chat with <span th:text="${conversation.user2.username}"></span></h1>

<!-- Display Messages -->
<ul>
    <li th:each="message : ${messages}">
        <strong th:text="${message.sender.username}"></strong>:
        <span th:text="${message.content}"></span>
        <span th:text="${#dates.format(message.timestamp, 'HH:mm')}"></span>
    </li>
</ul>

<!-- Send Message -->
<form method="post" th:action="@{/chat/{id}/send(id=${conversation.id})}">
    <textarea name="content" rows="3" cols="50" required></textarea>
    <button type="submit">Send</button>
</form>

<a href="/chat">Back to Conversations</a>
</body>
</html>
